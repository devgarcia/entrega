
// Trying to get a different color for alertify when Transporter refuse the order
                  


$(".btn-refuse").click(function(){  
  <%= form.hidden_field :status, :value => 'refuse' %>
});

$(".onWayPick)").click(function(){  
  <%= form.hidden_field :status, :value => 'onWayPick' %>
});


var refuseClicked = $(".onWayPick").click(function(){  
  alert("OE!!");
});


// $("button").click(function(){
  // $("p:first").addClass("intro");
// });

var completed = $(".cost-values").text()
//console.log(completed)


var orderStatus = $(".order-values-status").text()  
console.log(orderStatus)


//

var completed = $(".cost-values").text()


var orderStatus = $(".order-values-status").text()  
if (orderStatus == "Completed") {
  //$('div .earn').addClass('green')
  console.log(" OE!!!!!")
} else {
  console.log(" It isn't")
  console.log(orderStatus)
}



(orderStatus.includes('Completed'))


var indexStatus = $(".indexStatus").text()
console.log(indexStatus)


var orderStatus = $(".order-values-status").text()  
if (orderStatus.includes('Completed')) {
  $('div .earn').addClass('green')
} else {
  console.log(" It isn't")
  console.log(orderStatus)
}



var Row = document.getElementsByClassName("tableValues");
var Cells = Row..getElementsByTagName("td");
alert(Cells[0].innerText);



var status = $(this).val(),
      node_to_change = $(this).closest('.nested-fields').find('.statusValue'); 
      
        if(status == 'In Progress')      
          node_to_change.val(50)
        else if(status == 'Completed')
          node_to_change.val(100)
        else  node_to_change.val(0)
                
      });  



var indexStatus = $(".indexStatus").text()
if (indexStatus.includes('Completed')) {




$('td .earn').addClass('green')

}

var indexStatus = $(".indexStatus").text()
node_to_change = $(tr).closest('.td').find('.indexStatus'); 
      
        if(indexStatus == 'Completed') {
          console.log("OE!!!")
        }    else {
        console.log(" Not here")
        }






DISTANCE & COST

var cost = 0
var basecost = 6000
var valueKm = 1200
var k = 1

function roundNumber(number) {  
  return (Math.round(number * 100)/100).toFixed(2);
}

var distanceBOP = getDistanceBetweenOrderPointsInKm()
var roundedDistanceBOP = roundNumber(distanceBOP) 
console.log("Rounded DistanceBOPP= " + roundedDistanceBOP)

var distanceDifference = (distanceBOP - 4) // 4km
var roundedDistanceDifference = roundNumber(distanceDifference)
console.log("Distance Difference : " + roundedDistanceDifference) 

function chargeOver4k (){
  calchargaGretaer4k = (basecost  + (valueKm * roundedDistanceDifference / k))  // .toFixed(2)
  var roundedcalchargaGretaer4k = roundNumber(calchargaGretaer4k)
  return calchargaGretaer4k
}

console.log(chargeOver4k ())


function totalCost (){
  if (roundedDistanceBOP <= 4){
    return cost = basecost
    console.log("DOWN COST =" + cost)
  } else {
    return cost = chargeOver4k ()
    console.log("UPPER COST =" + cost)
  }
}


$( "a.btn-address-search" ).on( "click", function() {
   $('input[name="order[cost]').val(totalCost)
});

//$('input[id="address0').val()

function addressFieldEmpy() {
var address0 = $('input[id="address0').val()
var address1 = $('input[id="address0').val()

if ((address0 && address1) != ""){
alert("NO Empty");
} else {
alert('COne of them is Empty');
}


if ((address0 && address1) != ""){

$( "a.btn-address-search" ).on( "click", function()




(Math.round(distanceBOP * 100)/100).toFixed(2)


function roundNumber  () {  
  (Math.round(number * 100)/100).toFixed(2);
}

//var roundedDistanceBOP = Number(distanceBOP)
console.log("distanceBOP: " + roundedDistanceBOP) 






var distanceDifference = (distanceBOP - 4).toFixed(2) // 4km
var roundedDistanceDifference = Number(distanceDifference)
console.log("Distance Difference : " + roundedDistanceDifference)





//function chargeAfter4K (){
  chargaGretaer4k = ((valueKm * distanceDifference)/k)
  return chargaGretaer4k
//}


console.log(chargeAfter4K)

if (distanceBOP <= 4000){
  cost = basecost
} else {
  cost = basecost + chargeAfter4K ()
}


console.log("distanceBOP:" + console.log)
console.log("Distance Difference : " + distanceDifference)
console.log("chargeAfter4K : " + chargeAfter4K ())

console.log(getDistanceBetweenOrderPointsInKm())  
console.log(car)






//$(document).ready(function() {
//    alert(' OE!!!')
//})


  if ((latitude1 == latitude0) && (longitude0 == longitude1)) {
        alert(0)
      }
      else {
        alert('OPOOO')
      }

 var distaceCrowflies = $('input[name="order[distance]').val(getDistanceFromLatLonInKm())
  return distaceCrowflies
1
2
3
  
var searchAddress = $( "a.btn-address-search" )

$( "a.btn-address-search" ).on( "click", function() {
   $('input[name="order[distance]').val(getDistanceFromLatLonInKm())
});

$('input[name="order[cost]').val(getDistanceFromLatLonInKm())





searchAddress.on( "click", function() {
  //console.log( $( this ).text() );
  $('input[name="order[distance]').val(getDistanceFromLatLonInKm())
});




returnTrue.addEventListener('click', comeBack);

var searchAddress = $('a.btn-address-search')


$('a.btn-address-search').addEventListener('click', setdistance);

function setdistance(){
  alert('OE!!!') 
}


$('a.btn-address-search').addEventListener('click', setdistance);

searchAddress.addEventListener('click', function setdistance(){
  alert('OE!!!') 
});


$('a.btn-address-search').addEventListener('click', setdistance);
$('input[name="order[distance]').val(getDistanceFromLatLonInKm())







var searchAddress = document.getElementsByClassName('btn-address-search')



function setdistance(){
  alert('OE!!!')   //$('input[name="order[distance]').val(getDistanceFromLatLonInKm())
}

searchAddress.addEventListener('click', setdistance);

$('input[name="order[distance]').val(getDistanceFromLatLonInKm())







var distaceCrowflies = $('input[name="order[distance]').val(getDistanceFromLatLonInKm())
distaceCrowflies

order[distance]



var empty = $('#address0').blur(function()
{
    if( !$(this).val() ) {
         alert('EMPTY')
    }
});

empty

function empty(){
  var address0 = $('input[id="address0"]').val()
  if ((address0 !== "") || (address1 !== "")){
    alert ('address0 o address1 SON DIFFERENTES DE 0')
    $('input[name="order[distance]').val(getDistanceFromLatLonInKm())
  }
  else{
    alert ( "ambas son BLANKS")
  }
}
empty()

 ===================================== || =====================================


// Hide the returning location
// Change the title on left card 
// Makes the card bigger so only one is showing for addding the address

1-
$('.card-right').hide()  
$('.card-body-left h3').html("Sending and Receiving Location")  
$('.maps-row .col-md-6').removeClass( "col-md-6" ).addClass( "col-md-12" ) 

 ===================================== || =====================================
2-
var returnTrue = document.getElementById('order_return_true')
var returnFalse = document.getElementById('order_return_false')
var address0Value = $('#address0').val()

returnTrue.addEventListener('click', function() {
  $('.card-right').hide()  
  $('.card-body-left h3').html("Sending and Receiving Location")  
  $('.maps-row .col-md-6').removeClass( 'col-md-6' ).addClass( 'col-md-12')
  $('#address1').val(address0Value)  
});

returnFalse.addEventListener('click', function() {
  $('.card-right').show()  
  $('.card-body-left h3').html("Sending Location")  
  $('.maps-row .col-md-12').removeClass( 'col-md-12' ).addClass( 'col-md-6') 
});
 ===================================== || =====================================
3- 
(function($) {
  document.addEventListener("turbolinks:load", function() {
    var address0Value = $('#address0').val()
    var yesChecked = $('input[name="order[return]"]:checked').val()
    var returnTrue = document.getElementById('order_return_true')
    var returnFalse = document.getElementById('order_return_false')
    var topCardh3 = $('.top-card h3').text()

    var latitude0 = $('#latitude0').val()
    var longitude0 = $('#longitude0').val()

    function comeBack() {
      $('.card-right').hide()
      $('.recipient-card').hide() 
      if ( topCardh3 == "Detalles de la Orden"){
        $('.card-body-left h3').html("Dirección de Recogida y Entrega") 
      } else {
        $('.card-body-left h3').html("Sending and Receiving Location")
      } 
      $('.maps-row .col-md-6').removeClass( 'col-md-6' ).addClass( 'col-md-12' )
      $('#address1').val(address0Value)
      $('#latitude1').val(latitude0)
      $('#longitude1').val(longitude0)
      $(".btn-address-search").click()
    }

    function comeBackNot() {
      $('.card-right').show()  
      $('.recipient-card').show()
      if ( topCardh3 == "Detalles de la Orden"){
        $('.card-body-left h3').html("Direción de Recogida") 
      } else {
      $('.card-body-left h3').html("Sending Location")  
      }
      $('.maps-row .col-md-12').removeClass( 'col-md-12' ).addClass( 'col-md-6' )
       
    }

    if (yesChecked == "true"){
      comeBack()
    } else {
      comeBackNot()
    }

    returnTrue.addEventListener('click', comeBack);
    returnFalse.addEventListener('click', comeBackNot);
  })
})(jQuery)




===================================== || ========================================
Testing practise - WORKS!!


?? ADDRESS SHOULD BE DIFERENT
var address0Value = $('#address0').val()
var address1Value = $('#address1').val()
if (address0Value == address1Value){
  alert("Pick up address Should be different !! ")
} else {
  alert ("tey are DIFFERENT")
}

// GET THE SENDER'S NAME
var sender = $('#sender b').text()
sender

// GET THE RECIPIENT'S NAME
$('input[name="order[recipients_attributes][0][name]"]').val(sender)
recipientName

===================================== || ========================================

// GET THE the Lat and Long 

var latitude0 = $('input[id="latitude0"]').val()
var latitude1 = $('input[id="latitude1"]').val()
var longitude0 = $('input[id="longitude0"]').val()
var longitude1 = $('input[id="longitude1"]').val()
var R = 6371; // Radius of the earth in km

// Then the whole calculation 

function getDistanceFromLatLonInKm() {
  var latitude0 = $('input[id="latitude0"]').val()
  var latitude1 = $('input[id="latitude1"]').val()
  var longitude0 = $('input[id="longitude0"]').val()
  var longitude1 = $('input[id="longitude1"]').val()
  var R = 6371; // Radius of the earth in km

  if ((latitude1 == latitude0) && (longitude0 == longitude1)) {
    return 0
  }
  else {

  var diffLat = deg2rad(latitude1 - latitude0)
  var diffLon = deg2rad(longitude1 - longitude0)
  var a = 
    Math.sin(diffLat/2) * Math.sin(diffLat/2) +
    Math.cos(deg2rad(latitude0)) * Math.cos(deg2rad(latitude1)) * 
    Math.sin(diffLon/2) * Math.sin(diffLon/2)
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
  var d = R * c; // Distance in km
  return d
  }

  function deg2rad(deg) {
    return deg * (Math.PI/180)
  }
}

getDistanceFromLatLonInKm()











var returnTrue = document.getElementById('order_return_true');
returnTrue.addEventListener('click', function() {
  $('.card-right').hide()  
  $('.card-body-left h3').html("Sending and Receiving Location")  
  $('.maps-row .col-md-6').removeClass( "col-md-6" ).addClass( "col-md-12" ) 
});


$('input[type=radio][name="order[return]"]').change(function() {
  alert('OE!!')
});



$('#address0').val()



var yesChecked = $('input[id=order_return_true]:checked')

if (yesChecked){
  alert("oe!!!")
}

$('input[type=radio][name="order[return]"]').on('change', function() {
  alert($('input[name="order[return]"]:checked').val())
})



$('input[type=radio][name="order[locations_attributes][0][latitude]"]').val()
order[locations_attributes][0][latitude]


var yesChecked = $('input[name="order[return]"]:checked').attr('id')
  if (yesChecked == 'order_return_true'){
   alert("TRUE!!!")
  } else {
   alert("FALSE!!!")
  }

  
var latitude0 = $('#latitude0').val()
var lat2 = $('#latitude1').val(latitude0)

var longitude0 = $('#longitude0').val()
var lon2 = $('#longitude1').val(longitude0)

===================================== || ========================================

var recipientName =  $('input[name="order[recipients_attributes][0][name]"]').val()
recipientName




order[recipients_attributes][0][name]


var returnVal = document.getElementById('returnValue');
parentHTML = returnVal.parentNode.innerHTML;
parentHTML = parentHTML.replace(/>\s+</g, "><");
returnVal.parentNode.innerHTML = parentHTML;

console.log(returnVal, parentHTML);​


document.getElementById('order_recipients_attributes_0_name').val()


 $('input[name="order[return]"]:checked').val()

$('.recipient-card').hide()


var h3TopCard = $('.top-card h3').text()

if ( h3TopCard == "Detalles de la Orden"){
  $('.card-body-left h3').html("Punto de Envio y Entrega") 
} else {
  $('.card-body-left h3').html("Sending and Receiving Location")
}



var latitude0 = $('#latitude0').val()
var lat2 = $('#latitude1').val(latitude0)

var longitude0 = $('#longitude0').val()
var lon2 = $('#longitude1').val(longitude0)







var address0Value = $('#address0').val()
var yesChecked = $('input[name="order[return]"]:checked').val()

function comeBack() {
  $('.card-right').hide()  
  $('.card-body-left h3').html("Sending and Receiving Location")  
  $('.maps-row .col-md-6').removeClass( 'col-md-6' ).addClass( 'col-md-12' )
  $('#address1').val(address0Value)
}

function comeBacNot() {
  $('.card-right').show()  
  $('.card-body-left h3').html("Sending Location")  
  $('.maps-row .col-md-12').removeClass( 'col-md-12' ).addClass( 'col-md-6' ) 
}

if (yesChecked == "true"){
  comeBack()
  alert("TRUE!!!")
} else {
  comeBacNot()
  alert("FALSE!!!") 
}


var yesChecked = $('input[name="order[return]"]:checked').attr('id')
  if (yesChecked == 'order_return_true'){
   alert("TRUE!!!")
  } else {
   alert("FALSE!!!")
  }


function comeBack() {
  $('.card-right').hide()  
  $('.card-body-left h3').html("Sending and Receiving Location")  
  $('.maps-row .col-md-6').removeClass( 'col-md-6' ).addClass( 'col-md-12' )
  $('#address1').val(address0Value)
}




var returnTrue = document.getElementById('order_return_true')
var returnFalse = document.getElementById('order_return_false');
var address0Value = $('#address0').val()
function comeBack() {
    $('.card-right').hide()  
    $('.card-body-left h3').html("Sending and Receiving Location")  
    $('.maps-row .col-md-6').removeClass( 'col-md-6' ).addClass( 'col-md-12' )
    $('#address1').val(address0Value)
    }


  if (yesChecked == "true"){
    alert("TRUE!!!")
    comeBack
  } else {
    alert("FALSE!!!")
    function comeBacNot() {
    
  }
}
returnTrue.addEventListener('click', comeBack);
returnFalse.addEventListener('click', comeBacNot)



$('input[type=radio][name=Criteria1Score]:checked').attr('id')


var yesChecked = $('input[name="order[return]"]:checked').attr('id')

if (yesChecked == true ){
  alert("oe!!!")
}


var yesChecked = $('input[name="order[return]"]:checked').val()


$('input[type=radio][name="order[return]"]').on('change', function() {

  if (yesChecked == "true"){
   alert("TRUE!!!")
  } else {
   alert("FALSE!!!")
  }
})

var yesChecked = $('input[name="order[return]"]:checked').val()
  if (yesChecked == "true"){
   alert("TRUE!!!")
  } else {
   alert("FALSE!!!")
  }

YES IS SHOWING ALWAYS CHECKED !!! CHECK WHY??



// var noChecked = $('input[id=order_return_false]:checked')

JQuery

(function($) {
  document.addEventListener("turbolinks:load", function() {

    var yesChecked = $('input[name="order[return]"]:checked').attr('id')
    var returnTrue = document.getElementById('order_return_true')
    var returnFalse = document.getElementById('order_return_false');
    var address0Value = $('#address0').val() 

    function comeBack() {
      $('.card-right').hide()  
      $('.card-body-left h3').html("Sending and Receiving Location")  
      $('.maps-row .col-md-6').removeClass( 'col-md-6' ).addClass( 'col-md-12' )
      $('#address1').val(address0Value)
    }

    function comeBacNot() {
      $('.card-right').show()  
      $('.card-body-left h3').html("Sending Location")  
      $('.maps-row .col-md-12').removeClass( 'col-md-12' ).addClass( 'col-md-6' ) 
    }

    if (yesChecked == 'order_return_true'){
       comeBack
       returnFalse.addEventListener('click', comeBacNot);
      } else {
       comeBacNot
       returnTrue.addEventListener('click', comeBack);
      }

    returnTrue.addEventListener('click', comeBack);
    returnFalse.addEventListener('click', comeBacNot);
  })
})(jQuery)


/*
var yesChecked = $('input[id=order_return_true]:checked')
var noChecked = $('input[id=order_return_false]:checked')
if (yesChecked){
  comeBack
} else if (noChecked) {
  comeBacNot
}*/ 


/* var yesChecked = $('input[name="order[return]"]:checked').attr('id') */

  if (yesChecked == 'order_return_true'){
   //alert("TRUE!!!") 
   comeBack
  } else {
   //alert("FALSE!!!")
   comeBacNot
  }


returnTrue.addEventListener('click', comeBack);
returnFalse.addEventListener('click', comeBacNot);




(function($) {
  document.addEventListener("turbolinks:load", function() {


    var returnTrue = document.getElementById('order_return_true')
    var returnFalse = document.getElementById('order_return_false')
    var address0Value = $('#address0').val()

    var yesChecked = $('input[id=order_return_true]:checked')
    var noChecked = $('input[id=order_return_false]:checked')


    $('input[type=radio][name="order[return]"]').on('change', function() {
       alert("order[return]").val());
    }


   $('input[type=radio][name="order[return]"]').on('change', function() {
      alert("OEEE!!")
      $('input[name="order[return]"]:checked', input[name="order[return]").val())
   })



    if (yesChecked){
      comeBack
    } else if (noChecked) {
      comeBacNot
    }

    returnTrue.addEventListener('click', function() {
      $('.card-right').hide()  
      $('.card-body-left h3').html("Sending and Receiving Location")  
      $('.maps-row .col-md-6').removeClass( 'col-md-6' ).addClass( 'col-md-12')
      $('#address1').val(address0Value) 
    });

    returnFalse.addEventListener('click', function() {
      $('.card-right').show()  
      $('.card-body-left h3').html("Sending Location")  
      $('.maps-row .col-md-12').removeClass( 'col-md-12' ).addClass( 'col-md-6') 
    });
  })
})(jQuery)


