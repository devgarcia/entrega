<div class="order-create-update-buttons text-center ">
  <% if @order.status == 'draft' %>
    <div class="actions">
      <div class="d-inline col-sx-3" >
      <%= form.submit  'Save Draft', :class => 'btn btn-primary btn-draft', name: 'save_draft' %>
      </div>

      <div class="d-inline" >
      <%= form.submit  'Post', :class => 'btn btn-primary btn-post', name: 'post' %>
      </div>
    </div>






=================================== || ===========================================================

<!-- DIRECTS LOGIC TO RENDER VIEWS DEPENDING ON THE USER & THE ORDER.STATUS -->

<% if @user.class.name == "Sender"  %> 
    <% if @order.status == 'draft' %>     
      <%= render 'forminfo', form: form %>
    <% elsif @order.status == 'posted'%>      
       <%= render 'info', order: @order %>      
    <% elsif @order.status == 'taken'%> 
      <!-- <td><%#= form.select :status, Order.statuses.keys.values_at(2, 5).map {|status| [status.titleize,status]} %></td> -->
       <%= render 'info', order: @order %>
    <% else %>
      <td><%= @order.status.capitalize %></td> <!-- Antonio CHECK later if this is doing something -->
    <% end %>  

<% elsif @user.class.name == "Company"  %>    
  <!-- <tr>
    <th><%#= form.label :company_id %></th> 
    <td><%#=  @user.name.upcase %></td>
  </tr>  -->



<!--
  <tr>
    <th><%#= form.label :status %></th>
    <%# if @order.status == 'posted' %>
      <td><%#= form.select :status, Order.statuses.keys[1..5].map {|status| [status.titleize,status]} %></td>
    <%# elsif @order.status == 'taken' %>
      <td><%#= form.select :status, Order.statuses.keys[2..5].map {|status| [status.titleize,status]} %></td>
    <%# elsif @order.status == 'inTransit' %>
      <td><%#= form.select :status, Order.statuses.keys[3..5].map {|status| [status.titleize,status]} %>
    <%# else ['completed','cancelled'].include?(@order.status)  %>
      <td><%= @order.status %></td>
    <%# end %>
  </tr>

-->

  <% if @order.status == 'posted' %>

      <%= render 'info', order: @order %> <!-- Pilas commented out -->

    <% elsif @order.status == 'taken' %>
      <%= render 'info', order: @order %>
    <% elsif @order.status == 'inTransit' %>
      <%= render 'info', order: @order %>

  <% end %>



  <%#= render 'info', order: @order %>



  <%#= render 'forminfo', form: form %> 




<% elsif @user.class.name == "Transporter"  %> 

<!--
  <%#= @user.name %>
  <tr>
    <th><%#= form.label :company_id %></th> 
    <td><%#=  @order.transporter.company.name %></td>
  </tr> 

  <tr>
    <th><%#= form.label :transporter_id %></th>
    <td><%#=  @user.name %></td>
  </tr>

  <tr>
    <th><%#= form.label :status %></th>
    <td><%#= form.select :status, Order.statuses.keys[3..4].map {|status| [status.titleize,status]} %></td>
  </tr> -->



    <%= render 'info', order: @order %> 

<% end %>




====================  ACTION BUTTONS - READY BEFORE SETTING SENDER AT THE TOP OF THE IF ======================================

<%= link_to 'Back to Orders', url_for([@user, :orders]), :class => "col-sm-3 btn btn-primary btn-back" %> 

<% if ['completed', 'cancelled'].include?(@order.status) %> 

<!-- Company -->

<% elsif @user.class.name == "Company" && ['posted','taken', 'inTransit'].include?(@order.status) %>          
  <%#= link_to 'Back to Orders', url_for([@user, :orders]), :class => "col-sm-3 btn btn-primary btn-back" %> <!-- This should be above all with all status included -->

  <% if @order.status == 'posted' && current_page?(controller: 'orders', action: 'show') %>
  <%= link_to 'Edit Order', url_for([:edit, @user, @order]), :class => "col-sm-3 btn btn-primary btn-edit" %>
  <% elsif @order.status == 'posted' && current_page?(controller: 'orders', action: 'edit') %>                 
    <%= render 'editOrderStatusLogic', order: @order %>   
  <% elsif  @order.status == 'taken' %>
    <div class="col-lg-10 col-sm-10 editor">    
      <%= form_with(model: @order, url: [@user, @order], local: true) do |form| %>
        <%= form.hidden_field :status, :value => 'inTransit' %>
        <%= form.submit  'In Transit', :class => 'col-sm-2 btn btn-primary btn-post-button', name: 'inTransit' %>
      <% end %>
    </div>
  <% elsif @order.status == 'inTransit' %>
    <div class="col-lg-10 col-sm-10 editor">    
      <%= form_with(model: @order, url: [@user, @order], local: true) do |form| %>
        <%= form.hidden_field :status, :value => 'completed' %>
        <%= form.submit  'Complet', :class => 'col-sm-2 btn btn-primary btn-post-button', name: 'complete' %>
      <% end %>
    </div>
  <% end %>    

<!-- Sender -->

<% elsif @user.class.name == "Sender" && @order.status == 'draft' %>
  <%#= link_to 'Back to Orders', url_for([@user, :orders]), :class => "col-sm-3 btn btn-primary btn-back" %>   
  <%= link_to 'Edit Order', url_for([:edit, @user, @order]), :class => "col-sm-3 btn btn-primary btn-edit" %>

<% elsif @user.class.name == "Sender" && ['posted','taken'].include?(@order.status) %> 
  <%#= link_to 'Back to Orders', url_for([@user, :orders]), :class => "col-sm-3 btn btn-primary btn-back" %>
  <div class="col-lg-10 col-sm-10 editor">    
    <%= form_with(model: @order, url: [@user, @order], local: true) do |form| %>
      <%= form.hidden_field :status, :value => 'cancelled' %>
      <%= form.submit  'Cancel Order', :class => 'col-sm-2 btn btn-primary btn-post-button', name: 'cancel' %>
    <% end %>
  </div>


<!-- Transporter -->

<% elsif @user.class.name == "Transporter" && ['taken', 'inTransit'].include?(@order.status) %> 

  <% if @order.status == 'taken' && current_page?(controller: 'orders', action: 'show') %>
   <%= link_to 'Edit Order', url_for([:edit, @user, @order]), :class => "col-sm-3 btn btn-primary btn-edit" %>

  <% elsif current_page?(controller: 'orders', action: 'edit') %> 
    <% if  @order.status == 'taken' %>
      <div class="col-lg-10 col-sm-10 editor">    
        <%= form_with(model: @order, url: [@user, @order], local: true) do |form| %>
          <%= form.hidden_field :status, :value => 'inTransit' %>
          <%= form.submit  'In Transit', :class => 'col-sm-2 btn btn-primary btn-post-button', name: 'inTransit' %>
        <% end %>
      </div>
    <% elsif @order.status == 'inTransit' %>
      <div class="col-lg-10 col-sm-10 editor">    
        <%= form_with(model: @order, url: [@user, @order], local: true) do |form| %>
          <%= form.hidden_field :status, :value => 'completed' %>
          <%= form.submit  'Complet', :class => 'col-sm-2 btn btn-primary btn-post-button', name: 'complete' %>
        <% end %>
      </div>

      <%= render 'editOrderStatusLogic', order: @order %> 
    <% end %>
  <% end %>
  
<% else %>
  <td></td>
  <td></td>          

<% end %>  



=============================================||==============================================================


<!-- orders/info after CHANGES -->


<div class="row">
  <div class="col-md-6 mb-3 mb-md-0">
    <div class="card mb-3">       
      <div class="card-block mt-3 ml-5">
        <div class="row">
          <div class="col-md-4 ">
             <p class='fontsize bolds'><%= "Order Reference: "%></p>
          </div>
          <div class="col-md-8 mb-3">
            <p class='fontsize'><%= @order.id %></p>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-4">
             <p class='fontsize bolds'><%= "Status: "%></p>
          </div>
          <div class="col-md-8 fontsize">
            <p class='fontsize'><%= @order.status.present? ? @order.status.capitalize : "-"  %></p>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-4 ">
               <p class='fontsize bolds'><%= "Description: "%></p>
            </div>
            <div class="col-md-8 fontsize">
              <p class='fontsize'><%= @order.description %></p>
            </div> 
          </div>
        </div>
    </div>   
  </div>
</div>



<div class="row ">
  <div class="col-md-6 mb-3 mb-md-0">     
    <div class="card">        
      <div class="card-block mt-3 ml-5">
        <div class="row mb-3">
          <div class="col-md-4 ">
             <p class='fontsize bolds'><%= "Sender: "%></p>
          </div>
          <div class="col-md-8 mb-4">
            <p class='fontsize'><%= @order.sender.name %></p>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-4">
             <p class='fontsize bolds'><%= "Telephone: "%>
          </div>
          <div class="col-md-8 fontsize">
            <p class='fontsize'><%= @order.sender.telephone %></p>
          </div>
        </div>
      </div>
    </div>   
  </div> 
  <div class="col-md-6 mb-3 mb-md-0">  
    <div class="card">        
      <div class="card-block mt-3 ml-5">
        <div class="row mb-3">

          <% if @order.recipients.present? %>
          <div class="col-md-4 ">
             <p class='fontsize bolds'><%= "Recipient: "%></p>
          </div>
          <div class="col-md-8 mb-4">
            <p class='fontsize'><%= @order.recipients.last.name %></p>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-4">
             <p class='fontsize bolds'><%= "Telephone: "%>
          </div>
          <div class="col-md-8 fontsize">
            <p class='fontsize'><%= @order.recipients.first.telephone %></p>
          </div>
        </div>
        <% else %>

<% end %>
      </div>
    </div>   
  </div>
</div>    


<!-- Maps -->
<div class="col-md-12 mt-3 mb-5"> 
  <div class="row fontsize">

  
    <div class="col-md-6 mb-3">
      <div class="card left text-center"> <!-- mdb-color lighten-2  -->
        <div class="card-body-left">
          <h3 class="card-header">Sending Location</h3>          
          <div class="mb-5">
           <p class='fontsize'><%= @order.locations[0].address %></p>
          </div>                  
            <br>
            <div class="row mb-3 text-center show-times mb-4">
              <div class="col-md-4 ">
                 <p class='fontsize bolds'><%= "Pickup Time: "%></p>
              </div>
              <div class="col-md-8 mb-4">
                <p class='fontsize'><%= @order.pickup_time %></p>
              </div>
            </div>
          </div> 
      </div>
    </div>
    <% if @order.recipients.present? %>
      <div class="col-md-6 mb-3">
          <div class="card right text-center"> <!-- mdb-color lighten-2  -->
            <div class="card-body-right ">
              <h3 class="card-header">Recipient Location</h3>          
              <div class="mb-5">
                <p class='fontsize'><%= @order.locations[1].address %></p>
              </div>  
                    
                <br>
                   <div class="row mb-3 text-center show-times mb-4">
                    <div class="col-md-4">
                       <p class='fontsize bolds'><%= "Delivery Time: "%></p>
                    </div>
                    <div class="col-md-8 mb-4">
                      <p class='fontsize'><%= @order.delivery_time %></p>
                    </div>
                  </div>
            </div> 
          </div>
        </div>
      <% end %>
    </div>  
  </div>
</div>


<div class="col-md-6 mx-auto">  
  <div class="card mx-auto mb-5 map-no-border"> 
    <div  id="MapRow">
      <%= plane_icon = {:name => 'plane',
            :icon_url => asset_path('plane.png'),
            :icon_size => [20, 20],
            :icon_anchor => [20, 40],
            :popup_anchor => [0, -40]}

            target_icon = {:name => 'target',
            :icon_url => asset_path('target.png'),
            :icon_size => [20, 20],
            :icon_anchor => [20, 40],
            :popup_anchor => [0, -40]}
          
             markers = [{:latlng => coordinates(@order, 0),
               :popup => "Sending Location <br><b>#{address(@order,0)}</b>",
              :icon => plane_icon}]

             markers << { :latlng => coordinates(@order, 1),
               :popup => "Reciving Location <br><b>#{address(@order,1)}</b>",
              :icon => target_icon
             }


          latlng = coordinates(@order, 0)
          map(
              :center => {
                :latlng => latlng,
                :zoom => 13
              },
              :markers => markers                      
          )
      %>
    </div>  
  </div>
</div>




<div class="row mb-3">
  <div class="col-md-12 mb-3 ">     
    <div class="card text-center mb-3">        
      <div class="card-block mt-3 ">
        <div class="row order-measurements mb-3">              
          <div class="col-md-2">
             <p class='fontsize bolds'><%= "Weight: "%></p>
          </div>
          <div class="col-md-3">
            <p class='fontsize'><%= @order.weight %></p>
          </div>
          <div class="col-md-2 ">
             <p class='fontsize bolds'><%= "Length: "%></p>
          </div>
          <div class="col-md-3 mb-3">
            <p class='fontsize'><%= @order.length%></p>
          </div>  
        </div>   

        <div class="row order-measurements mb-3">               
          <div class="col-md-2 ">
             <p class='fontsize bolds'><%= "Width: "%></p>
          </div>
          <div class="col-md-3">
            <p class='fontsize'><%= @order.width  %></p>
          </div>
          <div class="col-md-2 ">
             <p class='fontsize bolds'><%= "Heigth: "%></p>
          </div>
          <div class="col-md-3 mb-3">
            <p class='fontsize'><%= @order.heigth  %></p>
          </div>
        </div>        
      </div>
    </div>   
  </div> 
</div> 

  <div class="col-md-4 mb-3 mb-md-0 mx-auto">  
    <div class="card mx-auto">        
      <div class="card-block mt-3 ml-5">
        <div class="row ">
          <div class="col-md-3 ">
             <p class='fontsize bolds'><%= "Cost: "%></p>
          </div>
          <div class="col-md-4 mb-4">
            <p class='fontsize'><%= @order.cost %></p>
          </div>
        </div>
      </div>
    </div>
  </div>

 </div>


<br>
<br>
<br>
<br>
| <%= link_to 'Back to Orders', url_for([@user, :orders]) %> |

<%= link_to 'Edit', url_for([:edit, @user, @order]) %>
<br>
<br>
<br>
<br>





<!-- This will be added only on Transporter/COmpany's view -->


    <% if @order.transporter.present? %>
      <tr>
        <th>Company</th>
        <td><%= @order.transporter.company.name %></td>
      </tr>

      <tr>
        <th>Transporter</th>
        <td><%= @order.transporter.name %></td>
      </tr>
    <% end %>

<!-- Up to here only on Transporter/COmpany's view -->


<br>
<br>
<br>
<br>
<br>



=================================== || =======================================






<!-- Original info.html.erb Order - before changes -->



<tr>
  <th>Description</th>
  <td><%= order.description %></td>
</tr>

<tr>
  <th>Weight</th>
  <td><%= order.weight %></td>
</tr>

<tr>
  <th>Length</th>
  <td><%= order.length %></td>
</tr>

<tr>
  <th>Width</th>
  <td><%= order.width %></td>
</tr>

<tr>
  <th>Heigth</th>
  <td><%= order.heigth %></td>
</tr>

<tr>

  <th>Pickup Address</th>
  <td><%= order.locations[0].address %></td>
</tr>

<tr>
  <th>Pickup Coordinates</th>
  <td><%= coordinates(order,0) %></td>

<tr>
  <th>Pickup Time</th>
  <td><%= order.pickup_time %></td>
</tr>

<tr>
  <th>Delivery Address</th>
  <td><%= order.locations[1].address %></td>
</tr>

<tr>
  <th>Delivery Coordinates</th>
  <td><%= coordinates(order,0)%></td>  
</tr>


<tr>
  <th>Delivery Time</th>
  <td><%= order.delivery_time %></td>
</tr>




<% if order.recipients.present? %>

<tr>
  <th>Recipient</th>
  <td><%= order.recipients.first.name %></td>
</tr> 
<tr>
  <th>Recipient Telephone </th>
  <td><%= order.recipients.first.telephone %></td>
</tr>
<tr>
  <th>Recipien Email</th>
  <td><%= order.recipients.first.email %></td>
</tr>
<% else %>

<% end %>




<tr>
  <th>Cost</th>
  <td><%= number_with_delimiter(order.cost.to_i) %></td>
</tr>




<!-- COMMENTED TO TEST THE RADIUS UPDATES EVERY AFTER 5 SECONDS  -->
<tr>
  <th>Radius</th>
  <td><%= number_with_delimiter(order.radius) %></td>
</tr>  



-------------------------------------||----------------------------------------------------------------


<!-- Original Show - Order - before changes -->

<table class="table table-striped">
  <thead>
    <h1 class="headingspace">Order Reference: </b><%= @order.id %></h1>
  </thead>
  <hr>
    <%= link_to 'Edit', url_for([:edit, @user, @order]) %>
  <hr>
  <tbody>
    <tr>
      <th>Sender</th>
      <td><%= @order.sender.name %></td>
    </tr>

    <% if @order.transporter.present? %>
      <tr>
        <th>Company</th>
        <td><%= @order.transporter.company.name %></td>
      </tr>

      <tr>
        <th>Transporter</th>
        <td><%= @order.transporter.name %></td>
      </tr>
    <% end %>

    <tr>
      <th>Status</th>
      <td><%= @order.status.present? ? @order.status.capitalize : "-"  %></td>
    </tr>

    <%= render 'info', order: @order %>

  </tbody>
</table>

<hr>



-------------------------------------||----------------------------------------------------------------




<div class="col-md-6 mb-3 mb-md-0">
  <!--   <div class="form-group">  -->
      <div class="card">
        <div class="card-block top-card"> 
          <div class="row">
            <div class="col-md-2">              
              <p class='fontsize'><%= "Sender: "%>              
              </p>              
            </div>

            <div class="col-md-3 ">
                <%= @order.sender.name %>
            </div> 


          </div> 
          <div class="row">
            <div class="col-md-2">  
              <div>  
                <p class='fontsize col-md-2'><%= "Telephone: "%>
                
              </div>
              <div class="col-md-3 ">
                <%= @order.sender.telephone %></p>
              </div>
            </p>
          </div>
        </div>
      </div>
              <br>
            </div>

-------------------------------------||----------------------------------------------------------------



  <% id = local_assigns[:id] %>


  <div id="MapRow">
    <div id="map<%=id%>">
    </div>   
    <%= "latitude#{id}" %>
    <%=   "longitude#{id}" %>
  </div>


<script>
    //<![CDATA[
      var map<%=id%> = L.map('map<%=id%>');
      var marker<%=id%> = L.marker([0,0]).addTo(map<%=id%>);
      lat<%=id%> = '#latitude<%=id%>';
      lng<%=id%> = '#longitude<%=id%>';
      lgnd<%=id%> = '#legend<%=id%>';

      $(iniMap(map<%=id%>, marker<%=id%>, lat<%=id%>, lng<%=id%>, lgnd<%=id%>));
      $(getNavCoordinates(map<%=id%>, marker<%=id%>, lat<%=id%>, lng<%=id%>));
      map<%=id%>.on('move', function(){ getCenter(map<%=id%>, marker<%=id%>, lat<%=id%>, lng<%=id%>, lgnd<%=id%>) });
    //]]>
  </script>






-------------------------------------||----------------------------------------------------------------
Removed while testing buttons for creation and Update up to posted

<% if @user.class.name == "Sender"  %>
  <tr>
    <div class="status"> <!-- This should be remived once the buttons have been added-->
    <th><%= form.label :status, :class => "mr-4" %></th>
    <% if @order.status == 'draft' %>
      <td><%= form.select :status, Order.statuses.keys.values_at(0, 1, 5).map {|status| [status.titleize,status]} %></td> <
    </div>
      
        <%= render 'forminfo', form: form %> 
      

    <% elsif @order.status == 'posted'%>
      <td><%= form.select :status, Order.statuses.keys.values_at(0, 1, 2, 5).map {|status| [status.titleize,status]} %></td> 
       <%= render 'info', order: @order %>
      
    <% elsif @order.status == 'taken'%> 
      <td><%= form.select :status, Order.statuses.keys.values_at(2, 5).map {|status| [status.titleize,status]} %></td>
       <%= render 'info', order: @order %>
    <% else %>
      <td><%= @order.status.capitalize %></td>
    <% end %> 
  </tr>  

<% elsif @user.class.name == "Company"  %>    
  <tr>
    <th><%= form.label :company_id %></th> 
    <td><%=  @user.name %></td>
  </tr>  

  <tr>
    <th><%= form.label :transporter_id %></th>
    <% if @user.class.name == "Company" && ['completed','cancelled'].include?(@order.status) %>
    <td><%= @order.transporter.name %></td>
    <% elsif @user.class.name == "Company" && @order.status == ('posted') %>
    <td><%= form.collection_select :transporter_id, @user.transporters,
        :id, :name, include_blank: false %></td>
    <% else %>
    <td><%= @order.transporter.name %></td>
    <% end %>
  </tr>

  <tr>
    <th><%= form.label :status %></th>
    <% if @order.status == 'posted' %>
      <td><%= form.select :status, Order.statuses.keys[1..5].map {|status| [status.titleize,status]} %></td>
    <% elsif @order.status == 'taken' %>
      <td><%= form.select :status, Order.statuses.keys[2..5].map {|status| [status.titleize,status]} %></td>
    <% elsif @order.status == 'inTransit' %>
      <td><%= form.select :status, Order.statuses.keys[3..5].map {|status| [status.titleize,status]} %>
    <% else ['completed','cancelled'].include?(@order.status)  %>
      <td><%= @order.status %></td>
    <% end %>
  </tr>

  <%= render 'info', order: @order %>

<% elsif @user.class.name == "Transporter"  %> 
  <%= @user.name %>
  <tr>
    <th><%= form.label :company_id %></th> 
    <td><%=  @order.transporter.company.name %></td>
  </tr> 

  <tr>
    <th><%= form.label :transporter_id %></th>
    <td><%=  @user.name %></td>
  </tr>

  <tr>
    <th><%= form.label :status %></th>
    <td><%= form.select :status, Order.statuses.keys[3..4].map {|status| [status.titleize,status]} %></td>
  </tr>

    <%= render 'info', order: @order %> 

<% end %>
<% end %>


      



-------------------------------------||----------------------------------------------------------------
FROM EDITOPRDERSTATUS LOGICS ON COMAPNY

@order.status == ('completed') || @order.status == ('cancelled') 


@order.status == 'completed' || @order.status == 'cancelled'  



-------------------------------------||----------------------------------------------------------------

FROM ACTIONS


<% elsif @user.class.name == "Sender" && order.status == 'posted'   %>
  <td><%= link_to url_for([@user, order]), method: :delete, data: { confirm: 'Are you sure?' } do %><span class="fa fa-trash"></span><% end %></td>





-------------------------------------||----------------------------------------------------------------
FROM INDEX

<td><%= address(order,0) %></td>
<td><%= coordinates(order,0).present? ? "-"   :  coordinates(order,0).to_dms %></td>  <!-- ORIGINAL -->
<td><%= order.pickup_time %></td>
<td><%= address(order,1) %></td>
<td><%= coordinates(order,0).present? ? "-"   :  coordinates(order,0).to_dms %></td> <!-- ORIGINAL -->


-------------------------------------||----------------------------------------------------------------

FROM INFO



<tr>

  <th>Pickup Address</th>
  <td><%= order.locations[0].address %></td>
</tr>
<% if order.locations[0].address.present? %>
<tr>
  <th>Pickup Coordinates</th>
  <td><%= [order.locations[0].latitude, order.locations[0].longitude].to_dms %></td>
</tr>

<% else %>

<th>Pickup Address</th>  
  <td><%= "-" %></td>
</tr>

<tr>
  <th>Pickup Coordinates</th>
  <td><%= "-" %></td>
</tr>

<% end %>

<tr>
  <th>Pickup Time</th>
  <td><%= order.pickup_time %></td>
</tr>



<tr>
<% if order.locations[1].address.present? %>
  <th>Delivery Address</th>
  <td><%= order.locations[1].address %></td>
</tr>

<tr>
  <th>Delivery Coordinates</th>
  <td><%= [order.locations[0].latitude, order.locations[0].longitude].to_dms %></td>
</tr>

<% else %>

  <th>Delivery Address</th>
  <td><%= "-" %></td>
</tr>

<tr>
  <th>Delivery Coordinates</th>
  <td><%= "-" %></td>
</tr>


<% end %>



<tr>
  <th>Delivery Time</th>
  <td><%= order.delivery_time %></td>
</tr>



-------------------------------------||----------------------------------------------------------------









<% if params[:address].present? %>
<tr>
  <th>Pickup Address</th>
   <td><%= 0 %></td>
    <% else %>

  <th>Pickup Address</th>
    <td><%= order.locations[0].address %></td>
</tr>
<% end %>

<% if params[:address].present? %>
  <tr>
    <th>Pickup Coordinates</th>  
    <td><%= 0 %></td>
    <% else %>
    <th>Pickup Coordinates</th>  
    <td><%= [order.locations[0].latitude, order.locations[0].longitude].to_dms %></td>
  </tr>
<% end %>


<!-- <tr>
  <th>Pickup Coordinates</th>
  <td><%#= [order.locations[0].latitude, order.locations[0].longitude].to_dms %></td>
</tr>-->

<tr>
  <th>Pickup Time</th>
  <td><%= order.pickup_time %></td>
</tr>

<tr>
  <th>Delivery Address</th>
  <td><%= order.locations[1].address %></td>
</tr>

<% if params[:address].blank? %>
  <tr>
    <th>Delivery Coordinates</th>  
    <td><%= 0 %></td>
    <% else %>
    <th>Delivery Coordinates</th>  
    <td><%= [order.locations[0].latitude, order.locations[0].longitude].to_dms %></td>
  </tr>
<% end %>


------------------------------------------------ || -------------------------------------------------

on INDEX Orders

 <td><%#= coordinates(order,0).present? ? coordinates(order,0).to_dms : "-" %></td>



        <td><%#= coordinates(order,0).present? ? coordinates(order,0).to_dms  : "-"  %></td>
       <!--  <td><%#= coordinates(order,0).to_dms %></td> -->

------------------------------------------------- || -----------------------------------------------




<% if params[:address].blank? %>
  <tr>
    <th>Pickup Coordinates</th>  
    <td><%="-"%></td>
    <% else %>
    <th>Pickup Coordinates</th>  
    <td><%= [order.locations[0].latitude, order.locations[0].longitude].to_dms %></td>
  </tr>
<% end %>


<tr>
  <th>Pickup Time</th>
  <td><%= order.pickup_time %></td>
</tr>

<tr>
  <th>Delivery Address</th>
  <td><%= order.locations[1].address %></td>
</tr>
<% if params[:address].blank? %>
  <tr>
    <th>Delivery Coordinates</th>  
    <td><%="-"%></td>
<% else %>
  <tr>
    <th>Delivery Coordinates</th>
    <td><%= [order.locations[1].latitude, order.locations[1].longitude].to_dms %></td>
  </tr>
<% end %>
